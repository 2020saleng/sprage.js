!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Sprage=e():t.Sprage=e()}(this,(function(){return(()=>{"use strict";var t=[(t,e,r)=>{t.exports=r(1)},(t,e,r)=>{const i=r(2),n=r(3);class o{constructor(){}get(t){let e=this.getFirst(t);if("string"==typeof e)return e;if(e&&e._token_)return n.checkTime(e._token_)?e._Val:(this.remove(t),null);if(e&&null!=e._count_){if(e._count_>0){let r=e._count_-1;return this.setCount({[t]:e._Val},r),e._Val}return this.remove(t),null}return e}getFirst(t){let e=localStorage.getItem(t);return null==e?null:JSON.parse(e)}set(t,e,r){if("string"==typeof t&&e){if(n.isNull(e))throw"The value cannot be empty";localStorage.setItem(t,JSON.stringify(e))}else{if("object"!=typeof t)return!1;for(let e in t)t.hasOwnProperty(e)&&localStorage.setItem(e,JSON.stringify(t[e]))}return!0}has(t){return!n.isNull(localStorage.getItem(t))}remove(t){try{return"string"==typeof t?this.removeItem(t):t.forEach((t=>{this.removeItem(t)})),!0}catch(t){return!1}}removeItem(t){this.has(t)&&localStorage.removeItem(t)}clear(){localStorage.clear()}setCount(t,e){for(let r in t)t.hasOwnProperty(r)&&(this.remove(r)&&localStorage.setItem(r,JSON.stringify({_Val:t[r],_count_:e})))}setOnce(t){this.setCount(t,1)}setTime(t,e){e=o.plugins.time(e);for(let r in t)t.hasOwnProperty(r)&&localStorage.setItem(r,JSON.stringify({_Val:t[r],_token_:e}))}getAll(){let t=[];for(let e=0;e<localStorage.length;e++){let r=localStorage.key(e),i=JSON.parse(localStorage.getItem(r));"object"!=typeof i?t.push({[r]:i}):"_Val"in i?t.push({[r]:i._Val}):t.push({[r]:i})}return t}forEach(t){this.getAll().forEach((e=>{for(let r in e){let i=e[r];t(r,i)}}))}isFull(){return!(this.surplus(!0)>0)}size(t=!1){let e=Object.entries(localStorage).map((t=>t.join(""))).join("").length;return t?e.toFixed(2):e.toFixed(2)+"KB"}surplus(t=!1){let e=this.size(!0);return t?(5120-e).toFixed(2):(5120-e).toFixed(2)+"KB"}static install(t,e){o.plugins[t]=e}}o.plugins={},o.install("time",(new i).timeInvertFn),t.exports=o},(t,e,r)=>{class i{constructor(){this.unitList=["s","min","h","day"],this.timeList=[1e3,6e4,36e5,864e5]}formatTimeInvert(t){return r(3).formatTimeInvert.call(this,t)}getIndex(t){for(let e=0;e<this.unitList.length;e++)if(-1!=t.indexOf(this.unitList[e]))return e}afterTime(t,e){const r=(new Date).getTime();let i=Number(t.slice(0,t.length-this.unitList[e].length));if(isNaN(i))throw"time should be a number";return r+i*this.timeList[e]}afterTimeInvert(t){t=t.trim();let e=this.getIndex(t);if(void 0===e)throw"unit is wrongfulness";return this.afterTime(t,e)}timeInvert(t){return t.includes("-")?this.formatTimeInvert(t):this.afterTimeInvert(t)}timeInvertFn(t){let e=new i;return e.timeInvert.call(e,t)}}t.exports=i},t=>{t.exports={isNull:function(t){return!t&&null!=typeof t&&0!=t},isNAN:function(t){return Object.is(t,NaN)},checkTime:function(t){return Number(t)>(new Date).getTime()},formatTimeInvert:function(t){return new Date(t).getTime()}}}],e={};var r=function r(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,r),o.exports}(0);return r})()}));