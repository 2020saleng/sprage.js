!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Sprage=t():e.Sprage=t()}(this,(()=>(()=>{"use strict";var e=[(e,t,r)=>{e.exports=r(4)},,(e,t,r)=>{class i{constructor(){this.unitList=["s","min","h","day"],this.timeList=[1e3,6e4,36e5,864e5]}formatTimeInvert(e){return r(3).formatTimeInvert.call(this,e)}getIndex(e){for(let t=0;t<this.unitList.length;t++)if(-1!=e.indexOf(this.unitList[t]))return t}afterTime(e,t){const r=(new Date).getTime();let i=Number(e.slice(0,e.length-this.unitList[t].length));if(isNaN(i))throw"time should be a number";return r+i*this.timeList[t]}afterTimeInvert(e){e=e.trim();let t=this.getIndex(e);if(void 0===t)throw"unit is wrongfulness";return this.afterTime(e,t)}timeInvert(e){return e.includes("-")?this.formatTimeInvert(e):this.afterTimeInvert(e)}timeInvertFn(e){let t=new i;return t.timeInvert.call(t,e)}}e.exports=i},e=>{e.exports={isNull:function(e){return!e&&null!=typeof e&&0!=e},isNAN:function(e){return Object.is(e,NaN)},checkTime:function(e){return Number(e)>(new Date).getTime()},formatTimeInvert:function(e){return new Date(e).getTime()}}},(e,t,r)=>{const i=r(2),n=r(3);class l{constructor(e={autoClear:!0,exclude:[]}){this.autoClear=e.autoClear,this.exclude=e.exclude?e.exclude:[]}get(e){let t=this.getFirst(e);if("string"==typeof t)return t;if(t&&t._token_)return n.checkTime(t._token_)?t._Val:(this.remove(e),null);if(t&&null!=t._count_){if(t._count_>0){let r=t._count_-1;return this.setCount({[e]:t._Val},r),t._Val}return this.remove(e),null}return t}getFirst(e){let t=localStorage.getItem(e);return null==t?null:JSON.parse(t)}set(e,t){const r=this;if("string"==typeof e&&t){if(n.isNull(t))throw"The value cannot be empty";i(e,JSON.stringify(t))}else{if("object"!=typeof e)return!1;for(let t in e)e.hasOwnProperty(t)&&i(t,JSON.stringify(e[t]))}return!0;function i(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){let l=r.size(!0)+e.length+JSON.stringify(t).length;if(r.isFull(l)&&r.autoClear)for(;;){let n=0;for(;n<r.getAll().length&&-1!=r.exclude.indexOf(Object.keys(r.getAll()[n])[0]);n++);if(n==r.getAll().length)throw"The legal space is full ";let o=Object.keys(r.getAll()[n])[0];if(localStorage.removeItem(o),!r.isFull(l)){i(e,t);break}}else console.error("error in setItem")}}}has(e){return!n.isNull(localStorage.getItem(e))}remove(e){try{return"string"==typeof e?this.removeItem(e):e.forEach((e=>{this.removeItem(e)})),!0}catch(e){return!1}}removeItem(e){this.has(e)&&localStorage.removeItem(e)}clear(){localStorage.clear()}setCount(e,t){for(let r in e)e.hasOwnProperty(r)&&(this.remove(r)&&localStorage.setItem(r,JSON.stringify({_Val:e[r],_count_:t})))}setOnce(e){this.setCount(e,1)}setTime(e,t){t=l.plugins.time(t);for(let r in e)e.hasOwnProperty(r)&&localStorage.setItem(r,JSON.stringify({_Val:e[r],_token_:t}))}getAll(){let e=[];for(let t=0;t<localStorage.length;t++){let r=localStorage.key(t),i=JSON.parse(localStorage.getItem(r));"object"!=typeof i?e.push({[r]:i}):"_Val"in i?e.push({[r]:i._Val}):e.push({[r]:i})}return e}forEach(e){this.getAll().forEach((t=>{for(let r in t){let i=t[r];e(r,i)}}))}isFull(e){return e?!(Number(this.size(!0))+Number(e)<5120):!(this.surplus(!0)>0)}size(e=!1){let t=Object.entries(localStorage).map((e=>e.join(""))).join("").length/1024;return e?t.toFixed(2):t.toFixed(2)+"KB"}surplus(e=!1){let t=this.size(!0);return e?(5120-t).toFixed(2):(5120-t).toFixed(2)+"KB"}static install(e,t){l.plugins[e]=t}}l.plugins={},l.install("time",(new i).timeInvertFn),e.exports=l}],t={};var r=function r(i){var n=t[i];if(void 0!==n)return n.exports;var l=t[i]={exports:{}};return e[i](l,l.exports,r),l.exports}(0);return r})()));