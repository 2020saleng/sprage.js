!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Sprage=e():t.Sprage=e()}(this,(()=>(()=>{"use strict";var t=[,(t,e,n)=>{n.r(e),n.d(e,{initMethods:()=>c});var i=n(2),r=n(4),o=n(5),l=n(6),s=n(9),u=n(10);function c(t){(0,u.initUtilsMethods)(t),(0,l.initSetMethods)(t),(0,o.initHas)(t),(0,r.initRemove)(t),(0,i.initGet)(t),(0,s.initClear)(t)}},(t,e,n)=>{n.r(e),n.d(e,{initGet:()=>r});const i=n(3);function r(t){t.get=function(t){let e=function(t){let e=localStorage.getItem(t);if(null===e)return null;if(e=JSON.parse(e),null!=e)try{e=JSON.parse(e)}catch(t){}return e}(t);if("string"==typeof e)return e;if(e&&e._token_)return i.checkTime(e._token_)?e._Val:(this.remove(t),null);if(e&&null!=e._count_){if(e._count_>0){let n=e._count_-1;return this.setCount({[t]:e._Val},n),e._Val}return this.remove(t),null}return e},t.getAll=function(){let t=[];for(let e=0;e<localStorage.length;e++){let n=localStorage.key(e),i=JSON.parse(localStorage.getItem(n));if(console.log(i),"object"!=typeof i){try{i=JSON.parse(i)}catch(t){}t.push({[n]:i})}else"_Val"in i?t.push({[n]:i._Val}):t.push({[n]:i})}return t}}},t=>{t.exports={isNull:function(t){return!t&&null!=typeof t&&0!=t},isNAN:function(t){return Object.is(t,NaN)},checkTime:function(t){return Number(t)>(new Date).getTime()},formatTimeInvert:function(t){return new Date(t).getTime()}}},(t,e,n)=>{function i(t){t.remove=function(e){try{return"string"==typeof e?r(t,e):e.forEach((e=>{r(t,e)})),!0}catch(t){return!1}}}function r(t,e){console.log(e),t.has(e)&&localStorage.removeItem(e)}n.r(e),n.d(e,{initRemove:()=>i})},(t,e,n)=>{n.r(e),n.d(e,{initHas:()=>r});const i=n(3);function r(t){t.has=function(t){return!i.isNull(localStorage.getItem(t))}}},(t,e,n)=>{n.r(e),n.d(e,{initSetMethods:()=>l});var i=n(7),r=n(8);const o=n(3);function l(t){(0,i.initSetCount)(t),(0,r.initSetTime)(t),t.set=function(e,n){const i=t;if("string"==typeof e&&n){if(o.isNull(n))throw"The value cannot be empty";r(e,JSON.stringify(n))}else{if("object"!=typeof e)return!1;for(let t in e)e.hasOwnProperty(t)&&r(t,JSON.stringify(e[t]))}return!0;function r(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){let o=i.size(!0)+t.length+JSON.stringify(e).length;if(i.isFull(o)&&i.autoClear)for(;;){let n=0;for(;n<i.getAll().length&&-1!=i.exclude.indexOf(Object.keys(i.getAll()[n])[0]);n++);if(n==i.getAll().length)throw"The legal space is full ";let l=Object.keys(i.getAll()[n])[0];if(localStorage.removeItem(l),!i.isFull(o)){r(t,e);break}}else console.error("error in setItem")}}}}},(t,e,n)=>{function i(t){t.setCount=function(e,n){for(let i in e)e.hasOwnProperty(i)&&(t.remove(i)&&localStorage.setItem(i,JSON.stringify({_Val:e[i],_count_:n})))},t.setOnce=function(t){this.setCount(t,1)}}n.r(e),n.d(e,{initSetCount:()=>i})},(t,e,n)=>{function i(t){t.setTime=function(t,e){let{constructor:n}=this;e=n.plugins.time(e);if(!["number","string"].every((t=>typeof t==t)))for(let n in t)t.hasOwnProperty(n)&&localStorage.setItem(n,JSON.stringify({_Val:t[n],_token_:e}))}}n.r(e),n.d(e,{initSetTime:()=>i})},(t,e,n)=>{function i(t){t.clear=function(){localStorage.clear()}}n.r(e),n.d(e,{initClear:()=>i})},(t,e,n)=>{function i(t){t.size=function(t=!1){let e=Object.entries(localStorage).map((t=>t.join(""))).join("").length/1024;return t?e.toFixed(2):e.toFixed(2)+"KB"},t.surplus=function(e=!1){let n=t.size(!0);return e?(5120-n).toFixed(2):(5120-n).toFixed(2)+"KB"},t.isFull=function(e){return e?!(Number(t.size(!0))+Number(e)<5120):!(t.surplus(!0)>0)}}n.r(e),n.d(e,{initUtilsMethods:()=>i})},(t,e,n)=>{class i{constructor(){this.unitList=["s","min","h","day"],this.timeList=[1e3,6e4,36e5,864e5]}formatTimeInvert(t){return n(3).formatTimeInvert.call(this,t)}getIndex(t){for(let e=0;e<this.unitList.length;e++)if(-1!=t.indexOf(this.unitList[e]))return e}afterTime(t,e){const n=(new Date).getTime();let i=Number(t.slice(0,t.length-this.unitList[e].length));if(isNaN(i))throw"time should be a number";return n+i*this.timeList[e]}afterTimeInvert(t){t=t.trim();let e=this.getIndex(t);if(void 0===e)throw"unit is wrongfulness";return this.afterTime(t,e)}timeInvert(t){return t.includes("-")?this.formatTimeInvert(t):this.afterTimeInvert(t)}timeInvertFn(t){let e=new i;return e.timeInvert.call(e,t)}}t.exports=i}],e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};return(()=>{n.r(i),n.d(i,{default:()=>o});var t=n(1);const e=n(11);class r{constructor(t={autoClear:!0,exclude:[]}){this.autoClear=t.autoClear,this.exclude=t.exclude?t.exclude:[];this.init(this)}init(e){(0,t.initMethods)(e)}static install(t,e){this.plugins[t]=e}}r.plugins={},r.install("time",(new e).timeInvertFn);const o=r})(),i=i.default})()));