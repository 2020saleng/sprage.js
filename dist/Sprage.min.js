!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Sprage=e():t.Sprage=e()}(this,(()=>(()=>{"use strict";var t=[,(t,e,n)=>{n.r(e),n.d(e,{initMethods:()=>c});var o=n(2),i=n(4),r=n(5),l=n(6),u=n(9),s=n(10);function c(t){(0,s.initUtilsMethods)(t),(0,l.initSetMethods)(t),(0,r.initHas)(t),(0,i.initRemove)(t),(0,o.initGet)(t),(0,u.initClear)(t)}},(t,e,n)=>{n.r(e),n.d(e,{initGet:()=>i});const o=n(3);function i(t){t.get=function(t){let e=function(t){let e=localStorage.getItem(t);if(null===e)return null;if(e=JSON.parse(e),null!=e)try{e=JSON.parse(e)}catch(t){}return e}(t);if("string"==typeof e)return e;if(e&&e._token_)return o.checkTime(e._token_)?e._Val:(this.remove(t),null);if(e&&null!=e._count_){if(e._count_>0){let n=e._count_-1;return this.setCount({[t]:e._Val},n),e._Val}return this.remove(t),null}return e},t.getAll=function(){let t=[];for(let e=0;e<localStorage.length;e++){let n=localStorage.key(e),o=JSON.parse(localStorage.getItem(n));"object"!=typeof o?t.push({[n]:o}):"_Val"in o?t.push({[n]:o._Val}):t.push({[n]:o})}return t}}},t=>{t.exports={isNull:function(t){return!t&&null!=typeof t&&0!=t},isNAN:function(t){return Object.is(t,NaN)},checkTime:function(t){return Number(t)>(new Date).getTime()},formatTimeInvert:function(t){return new Date(t).getTime()}}},(t,e,n)=>{function o(t){t.remove=function(e){try{return"string"==typeof e?i(t,e):e.forEach((e=>{i(t,e)})),!0}catch(t){return console.log(t),!1}}}function i(t,e){console.log(e),t.has(e)&&localStorage.removeItem(e)}n.r(e),n.d(e,{initRemove:()=>o})},(t,e,n)=>{n.r(e),n.d(e,{initHas:()=>i});const o=n(3);function i(t){t.has=function(t){return!o.isNull(localStorage.getItem(t))}}},(t,e,n)=>{n.r(e),n.d(e,{initSetMethods:()=>l});var o=n(7),i=n(8);const r=n(3);function l(t){(0,o.initSetCount)(t),(0,i.initSetTime)(t),t.set=function(e,n){const o=t;if("string"==typeof e&&n){if(r.isNull(n))throw"The value cannot be empty";i(e,JSON.stringify(n))}else{if("object"!=typeof e)return!1;for(let t in e)e.hasOwnProperty(t)&&i(t,JSON.stringify(e[t]))}return!0;function i(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){let r=o.size(!0)+t.length+JSON.stringify(e).length;if(o.isFull(r)&&o.autoClear)for(;;){let n=0;for(;n<o.getAll().length&&-1!=o.exclude.indexOf(Object.keys(o.getAll()[n])[0]);n++);if(n==o.getAll().length)throw"The legal space is full ";let l=Object.keys(o.getAll()[n])[0];if(localStorage.removeItem(l),!o.isFull(r)){i(t,e);break}}else console.error("error in setItem")}}}}},(t,e,n)=>{function o(t){t.setCount=function(e,n){for(let o in e)e.hasOwnProperty(o)&&(t.remove(o)&&localStorage.setItem(o,JSON.stringify({_Val:e[o],_count_:n})))},t.setOnce=function(t){this.setCount(t,1)}}n.r(e),n.d(e,{initSetCount:()=>o})},(t,e,n)=>{function o(t){t.setTime=function(e,n){n=t.plugins.time(n)}}n.r(e),n.d(e,{initSetTime:()=>o})},(t,e,n)=>{function o(t){t.clear=function(){localStorage.clear()}}n.r(e),n.d(e,{initClear:()=>o})},(t,e,n)=>{function o(t){t.size=function(t=!1){let e=Object.entries(localStorage).map((t=>t.join(""))).join("").length/1024;return t?e.toFixed(2):e.toFixed(2)+"KB"},t.surplus=function(e=!1){let n=t.size(!0);return e?(5120-n).toFixed(2):(5120-n).toFixed(2)+"KB"},t.isFull=function(e){return e?!(Number(t.size(!0))+Number(e)<5120):!(t.surplus(!0)>0)}}n.r(e),n.d(e,{initUtilsMethods:()=>o})}],e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return(()=>{n.r(o),n.d(o,{default:()=>i});var t=n(1);class e{constructor(t={autoClear:!0,exclude:[]}){this.autoClear=t.autoClear,this.exclude=t.exclude?t.exclude:[];this.init(this)}init(e){(0,t.initMethods)(e)}static install(t,n){e.plugins[t]=n}}e.plugins={};const i=e})(),o=o.default})()));